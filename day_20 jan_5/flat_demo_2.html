<script>
    let arr = [1, 2, 3, 4, [5, 6, 7, [8, [9, 10]]]];
    // result = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

    function myFlat(arr, depth = 1) {
        const result = [];
        for (ele of arr) {
            if (Array.isArray(ele) && depth > 0) {
                result.push(...myFlat(ele, depth - 1));
            } else {
                result.push(ele);
            }
        }
        return result;
    }
    let result = myFlat(arr, 3);
    console.log(result);
</script>